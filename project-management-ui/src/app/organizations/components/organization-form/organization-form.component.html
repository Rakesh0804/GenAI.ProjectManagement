<div class="organization-form-dialog">
  <h2 mat-dialog-title>
    <mat-icon>{{ isEdit ? 'edit' : 'business' }}</mat-icon>
    {{ isEdit ? 'Edit Organization' : 'Add New Organization' }}
  </h2>

  <div mat-dialog-content class="dialog-content">
    <form [formGroup]="organizationForm" (ngSubmit)="onSubmit()">
      <div class="form-grid">
        
        <!-- Basic Information Section -->
        <div class="form-section">
          <h3 class="section-title">Basic Information</h3>
          
          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Organization Name</mat-label>
              <input matInput formControlName="name" placeholder="Enter organization name">
              <mat-icon matSuffix>business</mat-icon>
              <mat-error *ngIf="isFieldInvalid('name')">
                {{ getFieldError('name') }}
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Description</mat-label>
              <textarea matInput formControlName="description" rows="3" 
                        placeholder="Enter organization description"></textarea>
              <mat-icon matSuffix>description</mat-icon>
              <mat-error *ngIf="isFieldInvalid('description')">
                {{ getFieldError('description') }}
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Website</mat-label>
              <input matInput formControlName="website" placeholder="https://example.com">
              <mat-icon matSuffix>language</mat-icon>
              <mat-error *ngIf="isFieldInvalid('website')">
                {{ getFieldError('website') }}
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Email</mat-label>
              <input matInput formControlName="email" type="email" placeholder="contact@example.com">
              <mat-icon matSuffix>email</mat-icon>
              <mat-error *ngIf="isFieldInvalid('email')">
                {{ getFieldError('email') }}
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Phone</mat-label>
              <input matInput formControlName="phone" placeholder="+1 (555) 123-4567">
              <mat-icon matSuffix>phone</mat-icon>
              <mat-error *ngIf="isFieldInvalid('phone')">
                {{ getFieldError('phone') }}
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Logo URL</mat-label>
              <input matInput formControlName="logo" placeholder="https://example.com/logo.png">
              <mat-icon matSuffix>image</mat-icon>
              <mat-error *ngIf="isFieldInvalid('logo')">
                {{ getFieldError('logo') }}
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <!-- Address Information Section -->
        <div class="form-section">
          <h3 class="section-title">Address Information</h3>
          
          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Address</mat-label>
              <textarea matInput formControlName="address" rows="2" 
                        placeholder="Enter street address"></textarea>
              <mat-icon matSuffix>location_on</mat-icon>
              <mat-error *ngIf="isFieldInvalid('address')">
                {{ getFieldError('address') }}
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>City</mat-label>
              <input matInput formControlName="city" placeholder="Enter city">
              <mat-icon matSuffix>location_city</mat-icon>
              <mat-error *ngIf="isFieldInvalid('city')">
                {{ getFieldError('city') }}
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>State/Province</mat-label>
              <input matInput formControlName="state" placeholder="Enter state">
              <mat-icon matSuffix>map</mat-icon>
              <mat-error *ngIf="isFieldInvalid('state')">
                {{ getFieldError('state') }}
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Country</mat-label>
              <input matInput formControlName="country" placeholder="Enter country">
              <mat-icon matSuffix>public</mat-icon>
              <mat-error *ngIf="isFieldInvalid('country')">
                {{ getFieldError('country') }}
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Postal Code</mat-label>
              <input matInput formControlName="postalCode" placeholder="Enter postal code">
              <mat-icon matSuffix>markunread_mailbox</mat-icon>
              <mat-error *ngIf="isFieldInvalid('postalCode')">
                {{ getFieldError('postalCode') }}
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Established Date</mat-label>
              <input matInput [matDatepicker]="picker" formControlName="establishedDate">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
              <mat-error *ngIf="isFieldInvalid('establishedDate')">
                {{ getFieldError('establishedDate') }}
              </mat-error>
            </mat-form-field>
          </div>
        </div>

      </div>
    </form>
  </div>

  <div mat-dialog-actions class="dialog-actions">
    <button mat-button (click)="onCancel()" [disabled]="isSubmitting">
      Cancel
    </button>
    <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="organizationForm.invalid || isSubmitting">
      <mat-progress-spinner diameter="20" *ngIf="isSubmitting"></mat-progress-spinner>
      <mat-icon *ngIf="!isSubmitting">{{ isEdit ? 'save' : 'add' }}</mat-icon>
      {{ isSubmitting ? 'Saving...' : (isEdit ? 'Update Organization' : 'Create Organization') }}
    </button>
  </div>
</div>
